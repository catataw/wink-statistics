# wink-statistics

> Fast and Numerically Stable Statistical Analysis Utilities

### [![Build Status](https://api.travis-ci.org/decisively/wink-statistics.svg?branch=master)](https://travis-ci.org/decisively/wink-statistics) [![Coverage Status](https://coveralls.io/repos/github/decisively/wink-statistics/badge.svg?branch=master)](https://coveralls.io/github/decisively/wink-statistics?branch=master) [![Inline docs](http://inch-ci.org/github/decisively/wink-statistics.svg?branch=master)](http://inch-ci.org/github/decisively/wink-statistics) [![devDependencies Status](https://david-dm.org/decisively/wink-statistics/dev-status.svg)](https://david-dm.org/decisively/wink-statistics?type=dev)

<img align="right" src="https://decisively.github.io/wink-logos/logo-title.png" width="100px" >

Perform fast and numerically stable statistical analysis using **`wink-statistics`**. It is a part of _[wink](https://www.npmjs.com/~sanjaya)_ — a growing family of high quality packages for Statistical Analysis, Natural Language Processing and Machine Learning in NodeJS.

A class of its functions operate on a real-time stream of data and incrementally compute required statistic that usually would take more than one pass over the data.

## Installation

Use [npm](https://www.npmjs.com/package/wink-statistics) to install:

    npm install wink-statistics --save

## Example [![Build Status](https://badge.runkitcdn.com/wink-statistics.svg)](https://npm.runkit.com/wink-statistics)

```javascript
// Load Wink Statistics
var stats = require( 'wink-statistics' );
```

## API

### probability

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### aggregate

Aggregates two probability estimates from independent sources about the occurrence of
a **single** event **a**. It returns the aggregated probability of occurrence
of the event **a**. The assumption here is that the two probabilities
(estimates) are not correlated with each other and the **common prior**
probability of **a** is **0.5**.

For a detailed explanation, refer to the paper titled
_[Bayesian Group Belief by Franz Dietrich](http://link.springer.com/article/10.1007/s00355-010-0453-x)_
published in Social Choice and Welfare October 2010, Volume 35, Issue 4, pp 595–626.

**Parameters**

-   `pa1` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** — first estimate of probability of occurrence of event **a**.
-   `pa2` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** — second estimate of probability of occurrence of event **a**.

**Examples**

```javascript
aggregate( 0.5, 0.6 );
// returns 0.6
aggregate( 0.5, 0.4 );
// returns 0.4
aggregate( 0.6, 0.6 );
// returns 0.6923076923076923
aggregate( 0.4, 0.6 );
// returns 0.5
```

Returns **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** — the aggregated probability.

#### range4CI

Computes probability from the **observed** count of successes (`successCount`) out of the total count (`totalCount`)
along with its **range** for required level of Confidence Interval (CI)  i.e. `zscore` .
The range is the minimum and maximum probability values for given `zscore` or CI.

These computations are based on approach specified in the Wilson's _Notes on
Probable Inference, The Law of Succession, and Statistical Inference_
published in ASA's Journal.

For quick reference, typical value of `zscore` for 90% and 95% CI is approximately
1.645 and 1.960 respectively.

**Parameters**

-   `successCount` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** — observed count of successes out of
-   `totalCount` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** — the total count.
-   `zscore` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** — for the required level of CI. (optional, default `1.645`)

**Examples**

```javascript
range4CI( 1, 10 );
// returns {
//   probability: 0.18518871952479238,
//   min: 0.02263232984000629,
//   max: 0.34774510920957846
// }
range4CI( 10, 100 );
// returns {
//   probability: 0.1105389143431459,
//   min: 0.06071598345043355,
//   max: 0.16036184523585828
// }
```

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** — containing `probability`, `min` and `max`.

### stats

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### fiveNumSummary

Returns the [five number summary](https://en.wikipedia.org/wiki/Five-number_summary) from the `sortedData`.

**Parameters**

-   `sortedData` **[array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** — sorted in ascending order of value.
-   `accessor` **([string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) \| [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function))** — Useful when each element of
    `sortedData` is an object or an array instead of number. If it is an object
    then it should be the key (string) to access the value; or if it is an array
    then it should be the index (number) to access the value; or it should be a function
    that extracts the value from the element passed to it. (optional, default `undefined`)

**Examples**

```javascript
fiveNumSummary( [ 1, 1, 2, 2, 3, 3, 4, 4 ] );
// returns {
//   min: 1, q1: 1.25, q2: 2.5, q3: 3.75, max: 4,
//   iqr: 2.5, range: 3, size: 8
// }
```

Returns **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** — 5-number summary consisting of `min`, `q1`, `median`, `q3`,
`max` along with `iqr`, `range`, and `size`.

#### percentile

Returns the `q`<sup>th</sup> percentile from the `sortedData`. The computation is
based on Method 11 described in [Quartiles in Elementary Statistics](https://ww2.amstat.org/publications/jse/v14n3/langford.html)
by Eric Langford published in Journal of Statistics Education Volume 14, Number 3 (2006).

**Parameters**

-   `sortedData` **[array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** — sorted in ascending order of value.
-   `q` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** — should be between 0 and 1 indicating percentile;
    for example, to get 25<sup>th</sup> percentile, it should be 0.25.
-   `accessor` **([string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) \| [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function))** — Useful when each element of
    `sortedData` is an object or an array instead of number. If it is an object
    then it should be the property-name (string) to access the value; or if it is an array
    then it should be the index (number) to access the value; or it should be a function
    that extracts the value from the element passed to it. (optional, default `undefined`)

**Examples**

```javascript
percentile( [ 1, 1, 2, 2, 3, 3, 4, 4 ], 0.25 );
// returns 1.25
percentile( [ 1, 1, 2, 2, 3, 3, 4, 4 ], 0.75 );
// returns 3.75
```

Returns **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** — `q`<sup>th</sup> percentile of `sortedData`.

### streaming

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### freqTable

It is a higher order function that returns an object containing `build()`, `result()`, and `reset()` functions.
Use `build()` to construct a frequency table from value of data items passed to it in real-time.
Probe a set of statistic anytime using `result()`, which may be reset via `reset()`.  The `result()` returns
an object containing the frequency `table` sorted in descending order of category counts or frequency, along
with it's `size`, `sum` of all counts, `x2` - chi-squared statistic, `df` - degree of freedom, and the
`entropy`.

The `x2` along with the `df` can be used test the hypothesis that "the distribution is a uniform one". The
`percentage` in `table` give the percentage of a category count against the `sum`; and `expected` is the count
assuming an uniform distribution.

**Examples**

```javascript
var ft = freqTable();
ft.build( 'Tea' );
ft.build( 'Tea' );
ft.build( 'Tea' );
ft.build( 'Pepsi' );
ft.build( 'Pepsi' );
ft.build( 'Gin' );
ft.build( 'Coke' );
ft.build( 'Coke' );
ft.result();
// returns {
//  table: [
//   { category: 'Tea', observed: 3, percentage: 37.5, expected: 2 },
//   { category: 'Pepsi', observed: 2, percentage: 25, expected: 2 },
//   { category: 'Coke', observed: 2, percentage: 25, expected: 2 },
//   { category: 'Gin', observed: 1, percentage: 12.5, expected: 2 }
//  ],
//  size: 4,
//  sum: 8,
//  x2: 1,
//  df: 3,
//  entropy: 1.9056390622295665
// }
```

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** — containing `compute`, `result`, and `reset` functions.

#### max

It is a higher order function that returns an object containing `compute()`, `result()`, and `reset()` functions.
Use `compute()` to continuously determine the **maximum** value of data items passed to it in real-time.
Probe the maximum value anytime using `result()`, which may be reset via `reset()`.  The `result()` returns
an object containing `max` of data.

**Examples**

```javascript
var maximum = max();
maximum.compute( 3 );
maximum.compute( 6 );
maximum.result();
// returns { min: 6 }
```

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** — containing `compute`, `result`, and `reset` functions.

#### mean

It is a higher order function that returns an object containing `compute()`, `result()`, and `reset()` functions.
Use `compute()` to continuously determine the **mean** value of data items passed to it in real-time.
Probe the mean anytime using `result()`, which may be reset via `reset()`. The `result()` returns
an object containing `mean` along with `size` of data. The computations are carried out using method pioneered
by B. P. Welford.

**Examples**

```javascript
var avg = mean();
avg.compute( 2 );
avg.compute( 3 );
avg.compute( 5 );
avg.compute( 7 );
avg.result();
// returns { n: 4, mean: 4.25 }
```

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** — containing `compute`, `result`, and `reset` functions.

#### min

It is a higher order function that returns an object containing `compute()`, `result()`, and `reset()` functions.
Use `compute()` to continuously determine the **minimum** value of data items passed to it in real-time.
Probe the minimum value anytime using `result()`, which may be reset via `reset()`.  The `result()` returns
an object containing `min` of data.

**Examples**

```javascript
var minimum = min();
minimum.compute( 3 );
minimum.compute( 6 );
minimum.result();
// returns { min: 3 }
```

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** — containing `compute`, `result`, and `reset` functions.

#### stdev

It is a higher order function that returns an object containing `compute()`, `result()`, `resultPE()`, and `reset()` functions.
Use `compute()` to continuously determine the **standard deviation** value of data items passed to it in real-time.
Probe the standard deviation anytime using `result()`, which may be reset via `reset()`. The `result()` returns
an object containing `stdev` along with `variance`, `mean`, and `size` of data. Use `resultPE()` to
obtain the population estimate of variance and standard deviation. The computations are carried out using method pioneered
by B. P. Welford.

**Examples**

```javascript
var sd = stdev();
sd.compute( 2 );
sd.compute( 3 );
sd.compute( 5 );
sd.compute( 7 );
sd.result();
// returns { n: 4, mean: 4.25,
//   variance: 3.6874999999999996,
//   stdev: 1.920286436967152
// }
```

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** — containing `compute`, `result`, `resultPE`, and `reset` functions.

#### sum

It is a higher order function that returns an object containing `compute()`, `result()`, and `reset()` functions.
Use `compute()` to continuously determine the **minimum** value of data items passed to it in real-time.
Probe the sum anytime using `result()`, which may be reset via `reset()`.  The `result()` returns
an object containing `sum` of data, which has been compensated for floating point errors using Neumaier Method.

**Examples**

```javascript
var addition = sum();
addition.compute( 1 );
addition.compute( 10e+100 );
addition.compute( 1 );
addition.compute( -10e+100 );
addition.result();
// returns { sum: 2 }
```

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** — containing `compute`, `result`, and `reset` functions.

#### summary

It is a higher order function that returns an object containing `compute()`, `result()`, `resultPE()`, and `reset()` functions.
Use `compute()` to continuously determine the basic **summary statistics** value of data items passed to it in real-time.
Probe the summary statistics anytime using `result()`, which may be reset via `reset()`. The `result()` returns
an object containing `stdev`, `variance`, `mean`, `size`, `min`, and `max` of data. Use `resultPE()` to
obtain the population estimate of variance and standard deviation. The computations are carried out using method pioneered
by B. P. Welford.

**Examples**

```javascript
var sd = mean();
sd.compute( 2 );
sd.compute( 3 );
sd.compute( 5 );
sd.compute( 7 );
sd.result();
// returns { n: 4, min: 2, mean: 4.25, max: 7,
//   variance: 3.6874999999999996,
//   stdev: 1.920286436967152
// }
```

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** — containing `compute`, `result`, `resultPE`, and `reset` functions.

## Need Help?

If you spot a bug and the same has not yet been reported, raise a new [issue](https://github.com/decisively/wink-statistics/issues) or consider fixing it and sending a pull request.

## Copyright & License

**wink-statistics** is copyright 2017 GRAYPE Systems Private Limited.

It is licensed under the under the terms of the GNU Affero General Public License as published by the Free
Software Foundation, version 3 of the License.
